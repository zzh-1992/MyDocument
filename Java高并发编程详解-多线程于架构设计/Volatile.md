
# Volatile的原理和实现机制
源码地址 OpenJDK-unsafe.cpp

被volatile修饰的变量都存在一个"lock"前缀
"lock"前缀实际上相当于一个内存屏障,该内存屏障会为指令的执行提供如下几个保障
- 确保指令重排序时不会将后面的代码排到内存屏障之前
- 确保指令重排序时不会将其前面的代码排到内存屏障之后
- 确保在执行到内存屏障修饰的指令时前面的代码全部执行完成
- 强制将线程工作内存中的值修改刷新至主内存中
- 如果是写操作，则会导致其他线程工作内存中的缓存数据失效